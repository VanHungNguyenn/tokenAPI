<%- include('../layout/header'); -%>

<div class="container" style="margin-top: 50px">
	<div class="row">
		<table
			class="table table-striped table-hover table-bordered table-responsive"
		>
			<thead>
				<tr>
					<th scope="col">Uid</th>
					<th scope="col">Token</th>
					<th scope="col">Live</th>
					<th scope="col">CreatedAt</th>
					<th scope="col">UpdatedAt</th>
				</tr>
			</thead>
			<tbody>
				<!-- render tokens -->
				<% for(var i = 0; i < tokens.length; i++) { %>
				<tr>
					<td><%= tokens[i].uid %></td>
					<td><%= tokens[i].token %></td>
					<td><%= tokens[i].live %></td>
					<td>
						<%= tokens[i].createdAt.toLocaleDateString( 'en-US', {
						year: 'numeric', month: '2-digit', day: '2-digit', hour:
						'2-digit', minute: '2-digit', second: '2-digit', hour12:
						false, timeZone: 'Asia/Bangkok' } ) %>
					</td>
					<td>
						<%= tokens[i].updatedAt.toLocaleDateString( 'en-US', {
						year: 'numeric', month: '2-digit', day: '2-digit', hour:
						'2-digit', minute: '2-digit', second: '2-digit', hour12:
						false, timeZone: 'Asia/Bangkok' } ) %>
					</td>
				</tr>
				<% } %>
			</tbody>
		</table>
	</div>
	<!-- pangination -->
	<div class="row">
		<% if(pages > 0) { %>
		<!-- show pagination if there is pages -->
		<nav class="mx-auto">
			<ul class="pagination" style="margin-top: 2rem">
				<!-- FIRST ITEM -->
				<% if(page == 1) { %>
				<li class="page-item disabled">
					<a class="page-link" href="/">First</a>
				</li>
				<% } else { %>
				<li class="page-item">
					<a class="page-link" href="/">First</a>
				</li>
				<% } %>
				<!-- ITEMS  -->
				<% var i = (Number(page) > 3 ? Number(page) - 2 : 1) %> <% if(i
				!== 1) { %>
				<li class="page-item disabled">
					<a class="page-link" href="#">...</a>
				</li>
				<% } %> <% for(; i <= (Number(page) + 2) && i <= pages; i++) {
				%> <% if(i == page) { %>
				<li class="page-item active">
					<a class="page-link" href="?page=<%= i %>"> <%= i %> </a>
				</li>
				<% } else { %>
				<li class="page-item">
					<a class="page-link" href="?page=<%= i %>"> <%= i %> </a>
				</li>
				<% } %> <% if (i == Number(page) + 2 && i < pages) { %>
				<li class="page-item disabled">
					<a class="page-link" href="#">...</a>
				</li>
				<% } %> <% } %>
				<!-- LAST ITEM -->
				<% if(page == pages) { %>
				<li class="page-item disabled">
					<a class="page-link" href="#"> Last </a>
				</li>
				<% } else { %>
				<li class="page-item">
					<a class="page-link" href="?page=<%= pages %>"> Last </a>
				</li>
				<% } %>
			</ul>
		</nav>
		<% } %>
	</div>
</div>
